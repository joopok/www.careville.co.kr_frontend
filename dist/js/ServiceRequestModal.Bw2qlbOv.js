import{j as e,A as t,m as s}from"./ui-vendor.Cr0a_QLz.js";import{r as a}from"./react-vendor.DLPRJx9T.js";import{X as i,k as r,Z as l,l as n,m as o,I as c,d,f as m,b as x,n as p,B as h,o as g,P as u,p as y,h as f,F as b,q as j}from"./utils.DMNqCBYd.js";import{B as w}from"./button.CwQkHdGN.js";const v={width:1920,height:1080},N={width:1280,height:720},k={width:1024,height:768};function C(){const e=window.innerWidth,t=window.innerHeight,s=e/t;let a;return a=e>=v.width?"full-hd":e>=N.width?"hd":e>=k.width?"tablet":"mobile",{width:e,height:t,category:a,isFullHD:"full-hd"===a,isHD:"hd"===a,isTablet:"tablet"===a,isMobile:"mobile"===a,aspectRatio:s}}const S={"에어컨 청소":{title:"에어컨 청소",description:"전문 장비와 친환경 세척제를 사용한 에어컨 완벽 분해 청소 서비스입니다. 내부 곰팡이, 먼지, 세균을 99.9% 제거하여 깨끗한 공기를 제공합니다.",benefits:["냉난방 효율 20~30% 향상","전기료 절감 효과","곰팡이/세균 99.9% 제거","악취 완벽 제거","알레르기 예방"],process:["사전 점검 및 오염도 진단","외관 및 필터 분리","열교환기/송풍팬 완전 분해","고압 스팀 세척","항균 코팅 및 조립"],images:[],price:"8만원~",duration:"1~2시간",rating:4.9,reviewCount:328},"입주청소":{title:"입주청소",description:"새 집으로 이사하기 전 완벽한 청소 서비스입니다. 건설 먼지, 접착제 자국, 시멘트 얼룩 등을 깔끔하게 제거합니다.",benefits:["건설 먼지 완벽 제거","접착제·스티커 자국 제거","새집 냄새 제거","입주 전 살균 소독"],process:["현장 사전 점검","창호·유리 청소","바닥 청소 및 코팅","욕실·주방 청소","마무리 점검"],images:[],price:"15만원~",duration:"4~8시간",rating:4.8,reviewCount:256},"이사청소":{title:"이사청소",description:"이사 전후 집을 깨끗하게 정리해드립니다. 기존 거주 흔적을 완벽히 제거하고 새 입주자를 위한 청결한 환경을 만듭니다.",benefits:["묵은 때 완벽 제거","얼룩·자국 전문 처리","수납공간 정리 청소","퇴실 점검 대비"],process:["가구 이동 후 청소","전체 바닥 청소","욕실·주방 집중 청소","창문·방충망 청소","최종 점검"],images:[],price:"12만원~",duration:"3~6시간",rating:4.8,reviewCount:189},"정기청소":{title:"정기청소",description:"주기적인 청소로 항상 깨끗한 생활 환경을 유지합니다. 주 1회, 격주, 월 1회 등 원하는 주기로 이용 가능합니다.",benefits:["정기적 위생 관리","시간 절약","일정한 청결 유지","맞춤형 서비스"],process:["정해진 일정 방문","기본 청소 진행","요청 사항 처리","결과 확인 및 피드백"],images:[],price:"8만원~",duration:"2~3시간",rating:4.9,reviewCount:412},"매트리스 케어":{title:"매트리스 케어",description:"매트리스 깊숙이 박힌 먼지, 진드기, 세균을 전문 장비로 완벽하게 제거합니다. 건강한 수면 환경을 위한 필수 서비스입니다.",benefits:["집먼지 진드기 99% 제거","알레르기 원인 제거","수면 환경 개선","매트리스 수명 연장"],process:["상태 점검","표면 진공 청소","UV 살균 처리","스팀 클리닝","건조 및 마무리"],images:[],price:"5만원~",duration:"1시간",rating:4.9,reviewCount:287},"사무실 청소":{title:"사무실 청소",description:"쾌적한 업무 환경을 위한 전문 사무실 청소 서비스입니다. 정기 계약 시 할인 혜택을 제공합니다.",benefits:["업무 효율 향상","직원 건강 관리","방문객 인상 개선","체계적 관리"],process:["사무 공간 청소","화장실 청소","휴게실 청소","유리창 청소","쓰레기 수거"],images:[],price:"별도협의",duration:"협의",rating:4.8,reviewCount:156},"상가 청소":{title:"상가 청소",description:"매장, 상가의 청결을 책임집니다. 고객에게 좋은 인상을 주는 깨끗한 매장 환경을 만들어 드립니다.",benefits:["매장 이미지 향상","고객 만족도 증가","위생 관리","매출 증대 효과"],process:["매장 현황 파악","바닥 청소","진열대 청소","유리면 청소","최종 점검"],images:[],price:"별도협의",duration:"협의",rating:4.7,reviewCount:98},"건물 청소":{title:"건물 청소",description:"아파트, 오피스텔, 상가 건물 등 대형 건물 전문 청소 서비스입니다. 공용 공간부터 외부까지 완벽하게 관리합니다.",benefits:["건물 가치 유지","입주자 만족도","체계적 관리","비용 효율적"],process:["공용부 청소","계단/복도 청소","주차장 청소","외부 청소","정기 점검"],images:[],price:"별도협의",duration:"협의",rating:4.8,reviewCount:124},"시스템 에어컨 분해 세척":{title:"시스템 에어컨 분해 세척",description:"천장형, 덕트형 시스템 에어컨 전문 세척 서비스입니다. 사업장 에어컨의 청결과 효율을 책임집니다.",benefits:["냉난방 효율 향상","전기료 절감","공기질 개선","장비 수명 연장"],process:["사전 점검","송풍구 분리","열교환기 세척","덕트 청소","항균 처리"],images:[],price:"별도협의",duration:"협의",rating:4.8,reviewCount:89},"입주 청소":{title:"입주 청소",description:"새로운 공간에서의 시작을 깨끗함에서 시작합니다. 이사 전후 완벽한 청소 서비스를 제공합니다.",benefits:["건축 먼지 제거","스티커 자국 제거","주방/욕실 완벽 세척","바닥 광택"],process:["전체 먼지 제거","바닥 청소","주방 청소","욕실 청소","최종 점검"],images:[],price:"별도협의",duration:"협의",rating:4.9,reviewCount:203}},$=e=>{if(!e)return[];try{const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch{return[]}},E=({isOpen:h,onClose:g,productNo:u,serviceTitle:y,serviceCd:f})=>{const b=function(){const[e,t]=a.useState(()=>"undefined"==typeof window?{width:v.width,height:v.height,category:"full-hd",isFullHD:!0,isHD:!1,isTablet:!1,isMobile:!1,aspectRatio:16/9}:C());return a.useEffect(()=>{const e=()=>{t(C())};return e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",e),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}},[]),e}(),j=a.useMemo(()=>function(e){const{category:t,width:s,height:a}=e;switch(t){case"full-hd":return{maxWidth:"1200px",maxHeight:"85vh",padding:"2rem",imageGridCols:6};case"hd":return{maxWidth:`${Math.min(.9*s,1e3)}px`,maxHeight:"88vh",padding:"1.5rem",imageGridCols:5};case"tablet":return{maxWidth:`${Math.min(.92*s,900)}px`,maxHeight:"90vh",padding:"1.25rem",imageGridCols:4};default:return{maxWidth:"100%",maxHeight:"95vh",padding:"1rem",imageGridCols:3}}}(b),[b]),[w,N]=a.useState(0),[k,E]=a.useState(!1),[F,T]=a.useState(!1),[D,M]=a.useState(null),[O,q]=a.useState(null),[H,L]=a.useState(new Set),P=e=>{if(!e)return null;if(S[e])return{...S[e],images:[]};const t=Object.keys(S);for(const s of t)if(e.includes(s)||s.includes(e))return{...S[s],images:[]};return{title:e||"서비스",description:"전문적이고 체계적인 케어빌의 프리미엄 청소 서비스입니다.",benefits:["전문 기술진 서비스","친환경 세척제 사용","완벽한 사후 관리","만족 보장"],process:["사전 점검","작업 준비","본 작업 진행","마무리 점검","고객 확인"],images:[],price:"견적문의",duration:"협의",rating:4.8,reviewCount:150}};a.useEffect(()=>{if(!h)return q(null),M(null),void L(new Set);if(!u){const e=P(y);return void(e&&(q(e),T(!1),M(null)))}(async()=>{T(!0),M(null);try{const t="http://ksm1779.cafe24.com",s=await fetch(`${t}/api/v1/products/${u}`);if(!s.ok)throw new Error("상품 정보를 불러올 수 없습니다.");const a=(await s.json()).product;if(!a)throw new Error("상품 정보가 없습니다.");const i=[];[a.viewFileSeq1,a.viewFileSeq2,a.viewFileSeq3,a.viewFileSeq4,a.viewFileSeq5,a.viewFileSeq6].forEach(e=>{if(e&&i.length<7){const s=`${t}/fileView.do?viewFileSeq=${e}`;i.includes(s)||i.push(s)}}),a.images&&a.images.length>0&&a.images.forEach(e=>{if(e.fileSeq&&i.length<7){const s=`${t}/fileView.do?viewFileSeq=${e.fileSeq}`;i.includes(s)||i.push(s)}});const r=a.serviceEffectsList&&a.serviceEffectsList.length>0?a.serviceEffectsList:$(a.serviceEffects),l=a.workProcessList&&a.workProcessList.length>0?a.workProcessList:$(a.workProcess),n=a.avgRatingFormatted?parseFloat(a.avgRatingFormatted):a.avgRating||4.9,o="002"===f||"002"===a.serviceCd?"별도협의":(e=a.salePrice)&&0!==e?`${Math.floor(e/1e4)}만원~`:"견적문의";q({title:a.productNm||"서비스",description:a.productDesc||"",benefits:r.length>0?r:["전문 기술진 서비스","친환경 세척제 사용","완벽한 사후 관리"],process:l.length>0?l:["사전 점검","작업 진행","최종 확인"],images:i,price:o,duration:a.serviceTime||"협의",rating:n>0?n:4.9,reviewCount:328})}catch(t){const e=P(y);e?(q(e),M(null)):M(t instanceof Error?t.message:"상품 정보를 불러올 수 없습니다.")}finally{T(!1)}var e})()},[h,u,y,f]),a.useEffect(()=>(document.body.style.overflow=h?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[h]),a.useEffect(()=>{N(0),E(!1)},[u]);const R=a.useMemo(()=>O?O.images.filter((e,t)=>!H.has(t)):[],[O,H]),W=e=>{L(t=>new Set([...t,e])),w===e&&R.length>1&&N(e=>e>0?e-1:0)};return e.jsx(t,{mode:"wait",children:h&&e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"fixed inset-0 z-50 flex items-center justify-center",style:{padding:b.isMobile?"0.5rem":"1.5rem"},children:[e.jsx(s.div,{initial:{opacity:0,backdropFilter:"blur(0px)"},animate:{opacity:1,backdropFilter:"blur(12px)"},exit:{opacity:0,backdropFilter:"blur(0px)"},transition:{duration:.3,ease:"easeOut"},className:"absolute inset-0 bg-black/70",onClick:g}),e.jsxs(s.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.97,y:10},transition:{duration:.4,ease:[.16,1,.3,1]},className:"relative bg-white shadow-2xl overflow-hidden",style:{width:"100%",maxWidth:j.maxWidth,maxHeight:j.maxHeight,borderRadius:b.isMobile?"1rem":"1.5rem"},onClick:e=>e.stopPropagation(),children:[e.jsx("button",{onClick:g,className:"absolute top-4 right-4 z-50 w-11 h-11 bg-white/95 backdrop-blur-md rounded-full flex items-center justify-center text-gray-600 hover:text-gray-900 hover:bg-white transition-all shadow-xl border border-gray-100",children:e.jsx(i,{className:"w-5 h-5"})}),e.jsxs("div",{className:"overflow-y-auto overflow-x-hidden custom-scrollbar",style:{maxHeight:j.maxHeight},children:[F&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-24",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary/20 rounded-full"}),e.jsx(r,{className:"absolute inset-0 w-16 h-16 text-primary animate-spin"})]}),e.jsx("p",{className:"text-gray-500 mt-6 text-lg",children:"상품 정보를 불러오는 중..."})]}),D&&!F&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-24",children:[e.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-full flex items-center justify-center mb-4",children:e.jsx(i,{className:"w-8 h-8 text-red-500"})}),e.jsx("p",{className:"text-red-500 mb-6 text-lg",children:D}),e.jsx("button",{onClick:g,className:"px-8 py-3 bg-primary text-white rounded-xl hover:bg-primary-dark transition-colors font-medium",children:"닫기"})]}),O&&!F&&!D&&e.jsxs(s.div,{initial:"hidden",animate:"visible",variants:{hidden:{},visible:{transition:{staggerChildren:.06,delayChildren:.1}}},children:[e.jsxs(s.div,{className:"relative bg-gradient-to-b from-gray-100 to-gray-50",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{duration:.4}}},children:[R.length>0?e.jsxs("div",{className:"relative overflow-hidden cursor-pointer group",style:{aspectRatio:b.isMobile?"4/3":b.isTablet?"16/10":"21/9"},onClick:()=>E(!k),children:[e.jsx(s.img,{src:R[w],alt:`${O.title} 이미지 ${w+1}`,className:"w-full h-full object-cover transition-transform duration-500",style:{transform:k?"scale(1.5)":"scale(1)"},initial:{opacity:0,scale:1.05},animate:{opacity:1,scale:1},transition:{duration:.5,ease:"easeOut"},onError:()=>W(O.images.indexOf(R[w]))},w),e.jsxs("div",{className:"absolute bottom-4 right-4 px-3 py-2 bg-black/60 backdrop-blur-sm rounded-lg text-white text-sm flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(l,{className:"w-4 h-4"}),k?"축소하기":"확대하기"]}),R.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:e=>{e.stopPropagation(),0!==R.length&&N(e=>(e-1+R.length)%R.length)},className:"absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/90 backdrop-blur-md rounded-full flex items-center justify-center text-gray-700 hover:bg-white hover:scale-110 transition-all shadow-lg opacity-0 group-hover:opacity-100",children:e.jsx(n,{className:"w-6 h-6"})}),e.jsx("button",{onClick:e=>{e.stopPropagation(),0!==R.length&&N(e=>(e+1)%R.length)},className:"absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/90 backdrop-blur-md rounded-full flex items-center justify-center text-gray-700 hover:bg-white hover:scale-110 transition-all shadow-lg opacity-0 group-hover:opacity-100",children:e.jsx(o,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"absolute top-4 left-4 px-4 py-2 bg-black/60 backdrop-blur-sm rounded-full text-white text-sm font-medium",children:[w+1," / ",R.length]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200",style:{aspectRatio:b.isMobile?"4/3":b.isTablet?"16/10":"21/9"},children:[e.jsx("div",{className:"w-20 h-20 bg-gray-300/50 rounded-2xl flex items-center justify-center mb-4",children:e.jsx(c,{className:"w-10 h-10 text-gray-400"})}),e.jsx("p",{className:"text-gray-500 text-lg font-medium",children:"등록된 이미지가 없습니다"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"서비스 상세 정보를 확인해주세요"})]}),R.length>1&&e.jsxs("div",{className:"bg-white border-t border-gray-100",style:{padding:j.padding},children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-600",children:["이미지 (",R.length,"개)"]}),R.length>(b.isMobile?4:6)&&e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(n,{className:"w-3 h-3"}),"스크롤하여 더보기",e.jsx(o,{className:"w-3 h-3"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-hide",style:{scrollSnapType:"x mandatory",WebkitOverflowScrolling:"touch"},children:R.map((t,a)=>e.jsxs(s.button,{className:`relative flex-shrink-0 ${b.isMobile?"w-16 h-16":b.isTablet?"w-20 h-20":"w-24 h-24"} rounded-xl overflow-hidden border-2 transition-all focus:outline-none focus:ring-2 focus:ring-primary/50 ${w===a?"border-primary ring-2 ring-primary/30 shadow-lg scale-105":"border-gray-200 hover:border-primary/50 hover:shadow-md"}`,style:{scrollSnapAlign:"start"},onClick:()=>N(a),whileHover:{scale:w===a?1.05:1.08},whileTap:{scale:.95},transition:{duration:.2},children:[e.jsx("img",{src:t,alt:`썸네일 ${a+1}`,className:"w-full h-full object-cover",onError:()=>W(O.images.indexOf(t))}),w===a&&e.jsx(s.div,{className:"absolute inset-0 bg-primary/15",initial:{opacity:0},animate:{opacity:1}}),e.jsx("div",{className:"absolute bottom-1 right-1 w-5 h-5 bg-black/70 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-[10px] text-white font-bold",children:a+1})})]},a))}),R.length>(b.isMobile?4:6)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute left-0 top-0 bottom-2 w-8 bg-gradient-to-r from-white to-transparent pointer-events-none"}),e.jsx("div",{className:"absolute right-0 top-0 bottom-2 w-8 bg-gradient-to-l from-white to-transparent pointer-events-none"})]})]})]})]}),e.jsxs(s.div,{style:{padding:j.padding},variants:{hidden:{opacity:0,y:15},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}}},children:[e.jsx(s.div,{className:"flex flex-col gap-4 mb-6 pb-6 border-b border-gray-100",variants:{hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3}}},children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 mb-3 tracking-tight",children:O.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4",children:[e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-gray-100 rounded-full text-sm text-gray-600",children:[e.jsx(d,{className:"w-4 h-4 text-gray-500"}),O.duration]}),e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-yellow-50 rounded-full text-sm text-yellow-700",children:[e.jsx(m,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),O.rating.toFixed(1),O.reviewCount&&e.jsxs("span",{className:"text-yellow-600/70",children:["(",O.reviewCount,")"]})]})]})]}),e.jsxs("div",{className:"sm:text-right",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"시작가"}),e.jsx("p",{className:"text-3xl sm:text-4xl font-bold text-primary tracking-tight",children:O.price})]})]})}),O.description&&e.jsxs(s.div,{className:"mb-8",variants:{hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3}}},children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(x,{className:"w-4 h-4 text-primary"})}),"서비스 상세 설명"]}),e.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100/50 rounded-2xl p-5 sm:p-6 border border-gray-100",children:e.jsx("p",{className:"text-gray-600 leading-relaxed text-sm sm:text-base whitespace-pre-line",children:O.description})})]}),e.jsxs(s.div,{className:"grid gap-6 "+(b.isMobile?"grid-cols-1":"sm:grid-cols-2"),variants:{hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3}}},children:[O.benefits.length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-primary/5 to-primary/10 rounded-2xl p-5 sm:p-6 border border-primary/10",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-5 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/20 rounded-lg flex items-center justify-center",children:e.jsx(m,{className:"w-4 h-4 text-primary"})}),"서비스 효과"]}),e.jsx("ul",{className:"space-y-3",children:O.benefits.map((t,a)=>e.jsxs(s.li,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.3+.05*a,duration:.3,ease:"easeOut"},className:"flex items-start gap-3 text-sm sm:text-base text-gray-700",children:[e.jsx("div",{className:"w-6 h-6 bg-primary/20 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx(p,{className:"w-3.5 h-3.5 text-primary"})}),e.jsx("span",{children:t})]},a))})]}),O.process.length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-secondary/5 to-secondary/10 rounded-2xl p-5 sm:p-6 border border-secondary/10",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-5 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-secondary/20 rounded-lg flex items-center justify-center",children:e.jsx(d,{className:"w-4 h-4 text-secondary"})}),"작업 과정"]}),e.jsx("ol",{className:"space-y-3",children:O.process.map((t,a)=>e.jsxs(s.li,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.35+.05*a,duration:.3,ease:"easeOut"},className:"flex items-start gap-3 text-sm sm:text-base text-gray-700",children:[e.jsx("span",{className:"w-6 h-6 bg-secondary text-white rounded-full flex items-center justify-center flex-shrink-0 text-xs font-bold shadow-sm",children:a+1}),e.jsx("span",{className:"pt-0.5",children:t})]},a))})]})]}),e.jsx("div",{className:"flex justify-center mt-8 pt-6 border-t border-gray-100",children:e.jsx("button",{onClick:g,className:"px-10 py-3.5 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-all hover:shadow-md active:scale-98",children:"닫기"})})]})]})]})]})]})})},F=({isOpen:l,onClose:n,serviceCd:o,serviceName:c,productNo:m,category:x="사업장 클리닝"})=>{const[v,N]=a.useState({name:"",phone:"",email:"",companyName:"",preferredDate:"",preferredTime:"",message:""}),[k,C]=a.useState(!1),[S,$]=a.useState(!1),[E,F]=a.useState({});a.useEffect(()=>(l?(document.body.style.overflow="hidden",N({name:"",phone:"",email:"",companyName:"",preferredDate:"",preferredTime:"",message:""}),$(!1),F({})):document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[l]);return e.jsx(t,{children:l&&e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(s.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),e.jsxs(s.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"relative w-full max-w-lg bg-white rounded-2xl shadow-2xl overflow-hidden max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-primary text-white p-6 z-10",children:[e.jsx("button",{onClick:n,className:"absolute top-4 right-4 w-8 h-8 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center text-white hover:bg-white/30 transition-all",children:e.jsx(i,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(h,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white/70 text-sm",children:x}),e.jsx("h2",{className:"text-xl font-bold",children:c||"서비스 신청"})]})]})]}),S?e.jsxs(s.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"p-12 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(p,{className:"w-10 h-10 text-green-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"신청 완료!"}),e.jsx("p",{className:"text-primary font-semibold mb-2",children:c}),e.jsx("p",{className:"text-gray-600",children:"빠른 시일 내에 연락드리겠습니다."})]}):e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return v.name.trim()||(e.name="이름을 입력해주세요"),v.phone.trim()?/^[0-9-]{10,13}$/.test(v.phone.replace(/-/g,""))||(e.phone="올바른 연락처를 입력해주세요"):e.phone="연락처를 입력해주세요",v.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v.email)&&(e.email="올바른 이메일을 입력해주세요"),F(e),0===Object.keys(e).length})()){C(!0);try{const e="http://ksm1779.cafe24.com/cnsltReg.do",t=new URLSearchParams;t.append("nm",v.name),t.append("tel2",v.phone.replace(/-/g,"")),v.email&&t.append("email",v.email),v.companyName&&t.append("compNm",v.companyName),o&&t.append("serviceCd",o),v.preferredDate&&t.append("hopeDay",v.preferredDate.replace(/-/g,"")),v.preferredTime&&t.append("hopeTime",v.preferredTime),m?(t.append("reqType","002"),t.append("productNo",m.toString())):t.append("reqType","001");const s=[c?`서비스: ${c}`:"",x?`카테고리: ${x}`:"",v.message?`요청사항: ${v.message}`:""].filter(Boolean).join("\n");t.append("inqryCn",s||"서비스 신청");const a=await fetch(`${e}?${t.toString()}`,{method:"POST"});if(!a.ok)throw new Error("서비스 신청에 실패했습니다.");const i=a.headers.get("content-type");if(i&&i.includes("application/json")){const e=await a.json();if("true"===e.isError||!0===e.isError)throw new Error(e.excpMsg||"서비스 신청에 실패했습니다.")}$(!0),setTimeout(()=>{n()},2e3)}catch(t){alert(t instanceof Error?t.message:"서비스 신청에 실패했습니다. 다시 시도해주세요.")}finally{C(!1)}}},className:"p-6 space-y-5",children:[e.jsxs("div",{className:"bg-primary/5 border border-primary/20 rounded-xl p-4",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-primary mb-1",children:[e.jsx(p,{className:"w-4 h-4"}),"신청 서비스"]}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:c})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(g,{className:"w-4 h-4 text-primary"}),"이름 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:v.name,onChange:e=>N(t=>({...t,name:e.target.value})),className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary outline-none transition-all "+(E.name?"border-red-500":"border-gray-200"),placeholder:"홍길동"}),E.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:E.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(u,{className:"w-4 h-4 text-primary"}),"연락처 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",value:v.phone,onChange:e=>(e=>{const t=e.replace(/[^0-9]/g,"");let s=t;t.length>3&&t.length<=7?s=`${t.slice(0,3)}-${t.slice(3)}`:t.length>7&&(s=`${t.slice(0,3)}-${t.slice(3,7)}-${t.slice(7,11)}`),N(e=>({...e,phone:s}))})(e.target.value),className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary outline-none transition-all "+(E.phone?"border-red-500":"border-gray-200"),placeholder:"010-1234-5678",maxLength:13}),E.phone&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:E.phone})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(y,{className:"w-4 h-4 text-primary"}),"이메일 ",e.jsx("span",{className:"text-gray-400 text-xs",children:"(선택)"})]}),e.jsx("input",{type:"email",value:v.email,onChange:e=>N(t=>({...t,email:e.target.value})),className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary outline-none transition-all "+(E.email?"border-red-500":"border-gray-200"),placeholder:"example@email.com"}),E.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:E.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(h,{className:"w-4 h-4 text-primary"}),"업체명 ",e.jsx("span",{className:"text-gray-400 text-xs",children:"(선택)"})]}),e.jsx("input",{type:"text",value:v.companyName,onChange:e=>N(t=>({...t,companyName:e.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary outline-none transition-all",placeholder:"회사/매장명"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(f,{className:"w-4 h-4 text-primary"}),"희망 날짜"]}),e.jsx("input",{type:"date",value:v.preferredDate,onChange:e=>N(t=>({...t,preferredDate:e.target.value})),min:(()=>{const e=new Date;return e.setDate(e.getDate()+1),e.toISOString().split("T")[0]})(),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(d,{className:"w-4 h-4 text-primary"}),"희망 시간"]}),e.jsxs("select",{value:v.preferredTime,onChange:e=>N(t=>({...t,preferredTime:e.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary outline-none transition-all appearance-none bg-white",children:[e.jsx("option",{value:"",children:"선택"}),["09:00 - 10:00","10:00 - 11:00","11:00 - 12:00","13:00 - 14:00","14:00 - 15:00","15:00 - 16:00","16:00 - 17:00","17:00 - 18:00","협의 후 결정"].map(t=>e.jsx("option",{value:t,children:t},t))]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(b,{className:"w-4 h-4 text-primary"}),"상세 요청사항 ",e.jsx("span",{className:"text-gray-400 text-xs",children:"(선택)"})]}),e.jsx("textarea",{value:v.message,onChange:e=>N(t=>({...t,message:e.target.value})),rows:3,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary outline-none transition-all resize-none",placeholder:"청소 면적, 특별 요청사항 등을 입력해주세요"})]}),e.jsx(w,{type:"submit",disabled:k,className:"w-full h-14 bg-primary hover:bg-primary-dark text-white font-semibold text-base rounded-xl transition-all duration-300 flex items-center justify-center gap-2 disabled:opacity-70",children:k?e.jsxs(e.Fragment,{children:[e.jsx(r,{className:"w-5 h-5 animate-spin"}),"신청 중..."]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"w-5 h-5"}),"서비스 신청하기"]})}),e.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["신청 시 ",e.jsx("span",{className:"text-primary",children:"개인정보 수집 및 이용"}),"에 동의합니다."]})]})]})]})})};export{E as S,F as a};
